{% extends 'academics/base.html' %}

{% block body %}

<div class="container py-5">
    <h2 class="mb-4">Select Branch to View Subjects</h2>

    <form method="get" class="mb-4">
        <select name="branch_id" class="form-select w-50 d-inline-block me-2" onchange="this.form.submit()">
            <option value="">-- Select Department --</option>
            {% for dept in departments %}
                <option value="{{ dept.id }}" {% if selected_department and dept.id == selected_department.id %}selected{% endif %}>
                    {{ dept.name }}
                </option>
            {% endfor %}
        </select>
    </form>

    {% if selected_department %}
        <h4 class="text-primary">{{ selected_department.name }}</h4>

        {% for semester in semesters %}
            <div class="card my-3">
                <div class="card-header bg-secondary text-white">
                    {{ semester.name }}
                </div>
                <ul class="list-group list-group-flush">
                    {% for subject in semester.subject_set.all %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ subject.name }}
                            <a href="{{ subject.url }}" class="btn btn-sm btn-outline-success" target="_blank">Download</a>
                        </li>
                    {% empty %}
                        <li class="list-group-item">No subjects available.</li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    {% endif %}
</div>

{% endblock %}
